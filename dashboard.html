<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CoinFlow | ุงูุชุนุฏูู</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="glass-card">
            <div class="mining-wheel"><span style="animation: none; color:var(--primary); font-weight:bold;">AI</span></div>
            <h1 id="userBalance" style="font-size: 40px; margin: 15px 0;">$0.00</h1>
            <p style="color:var(--primary)">ูุธุงู ุงูุชุนุฏูู ูุนูู ุจููุงุกุฉ ุนุงููุฉ</p>
        </div>

        <div class="glass-card">
            <h3>ุฅูุฏุงุน USDT (TRC20)</h3>
            <div id="walletAddr" style="background:#000; padding:12px; border-radius:10px; font-size:11px; margin:10px 0; border:1px dashed var(--primary); color:#00ff00;">TAEhVTpKt3TZtp3GGr2Sna9T7n6SsFzgHP</div>
            <button onclick="copyAddr()">ูุณุฎ ุนููุงู ุงูุฅูุฏุงุน</button>
        </div>

        <div class="glass-card">
            <h3>ุณุญุจ ููุฑู ููุฃุฑุจุงุญ</h3>
            <input type="number" id="drawAmt" placeholder="ุญุฏุฏ ุงููุจูุบ">
            <input type="text" id="drawWall" placeholder="ุนููุงู ูุญูุธุฉ ุงููุณุชูู">
            <button onclick="autoWithdraw()" style="background:#e74c3c;">ุชุฃููุฏ ูุฎุตู ุงูุฑุตูุฏ</button>
        </div>

        <button onclick="location.href='chat.html'">ุงูุฏุนู ูุงูุฏุฑุฏุดุฉ ๐ฌ</button>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="script.js"></script>
    <script>
        function copyAddr() {
            navigator.clipboard.writeText("TAEhVTpKt3TZtp3GGr2Sna9T7n6SsFzgHP");
            alert("ุชู ุงููุณุฎ! ุงุฑุณู ุงูุฅุซุจุงุช ูู ุงูุฏุฑุฏุดุฉ");
        }

        function autoWithdraw() {
            const amt = parseFloat(document.getElementById('drawAmt').value);
            const wall = document.getElementById('drawWall').value;
            const user = firebase.auth().currentUser;
            if(!amt || !wall) return alert("ุงููู ุงูุจูุงูุงุช");

            db.ref('users/'+user.uid).once('value', s => {
                const bal = s.val().balance || 0;
                if(bal >= amt) {
                    const newBal = bal - amt;
                    db.ref('users/'+user.uid).update({ balance: newBal }).then(() => {
                        db.ref('users/'+user.uid+'/messages').push({
                            s:'u', t:`๐จ ุทูุจ ุณุญุจ: ${amt}$ ุฅูู ${wall} (ุชู ุงูุฎุตู ุชููุงุฆูุงู)`, type:'text', time:Date.now()
                        });
                        alert("ุชู ุงูุณุญุจ ูุฎุตู ุงููุจูุบ ูู ุฑุตูุฏู ุจูุฌุงุญ!");
                    });
                } else { alert("ุฑุตูุฏู ุบูุฑ ูุงูู!"); }
            });
        }
    </script>
</body>
</html>