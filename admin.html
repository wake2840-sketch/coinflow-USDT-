<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container" id="lock">
        <div class="glass-card" style="margin-top: 100px;">
            <h2>Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</h2>
            <input type="password" id="pin" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ">
            <button onclick="login()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…</button>
        </div>
    </div>
    <div class="container" id="panel" style="display:none;">
        <h2 style="margin-bottom:20px; color: var(--primary);">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h2>
        <div id="uList"></div>
    </div>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="script.js"></script>
    <script>
        function login() {
            if(document.getElementById('pin').value === "30003100") {
                document.getElementById('lock').style.display='none';
                document.getElementById('panel').style.display='block';
                load();
            } else { alert("Ø§Ù„Ø±Ù…Ø² ØºÙŠØ± ØµØ­ÙŠØ­!"); }
        }
        function load() {
            db.ref('users').on('value', s => {
                let h = '';
                const data = s.val();
                for(let id in data) {
                    h += `<div class="glass-card" style="text-align:right; border-right: 4px solid var(--primary);">
                        <p style="font-weight: bold;">ðŸ‘¤ ${data[id].email}</p>
                        <p>ðŸ’° Ø§Ù„Ø±ØµÙŠØ¯: ${data[id].balance || 0}$</p>
                        <div style="display:flex; gap:5px;">
                            <button onclick="edit('${id}')" style="font-size:12px;">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±ØµÙŠØ¯</button>
                            <button onclick="reply('${id}')" style="background:#f39c12; font-size:12px;">Ø±Ø¯ Ø¯Ø±Ø¯Ø´Ø©</button>
                        </div>
                    </div>`;
                }
                document.getElementById('uList').innerHTML = h;
            });
        }
        function edit(id) {
            let n = prompt("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯:");
            if(n) db.ref('users/'+id).update({ balance: parseFloat(n) });
        }
        function reply(id) {
            let m = prompt("Ø§ÙƒØªØ¨ Ø±Ø¯Ùƒ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…:");
            if(m) db.ref('users/'+id+'/messages').push({ s:'a', t:m, time: Date.now() });
        }
    </script>
</body>
</html>